<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<!--
########### SVN repository information ###################
# $Date$
# $Author$
# $Revision$
# $URL$
# $Id$
########### SVN repository information ###################
-->

	<!--  ${host.arch} to be how SWT distributions are named:
			${graphics}-${os}-${arch}
			win32-win32-x86_64
			win32-win32-x86
			gtk-solaris-x86
			gtk-linux-x86_64
			win32-wce_ppc-arm-j2se  (for windows mobile: may not handle this one)
			cocoa-macosx-x86_64
			cocoa-macosx          	(Mac OS X with 32-bit Java)
		perhaps: http://lopica.sourceforge.net/os.html
	-->

<project name="Determine host.arch property for ant">

	<property environment="env" />

	<condition property="os" value="win32">
	  <or>
	    <os family="win9x" />
	    <os family="winnt" />
	  </or>
	</condition>

	<condition property="os" value="macosx">
		<and>
			<os family="mac" />
			<os family="unix"/>
		</and>
	</condition>

	<condition property="os" value="linux">
		<and>
	  		<os family="unix" />
			<equals arg1="${os.name}" arg2="Linux"/>
		</and>
	</condition>

	<condition property="os" value="solaris">
		<and>
	  		<os family="unix" />
			<equals arg1="${os.name}" arg2="SunOS"/>
		</and>
	</condition>

	<condition property="os" value="unix">
		<and>
	  		<os family="unix" />
			<not>
		  		<os family="mac" />
			</not>
		</and>
	</condition>

	<condition property="os" else="unknown">
		<isset property="os"/>
	</condition>

	<condition property="graphics" value="win32">
		<equals arg1="${sun.desktop}" arg2="windows"/>
	</condition>

	<condition property="graphics" value="cocoa">
		<!-- How can this be improved?  What about carbon?-->
		<equals arg1="${os}" arg2="macosx"/>
	</condition>

	<condition property="graphics" value="gtk">
		<equals arg1="${sun.desktop}" arg2="gnome"/>
	</condition>

	<condition property="graphics" value="motif">
		<and>
			<os family="unix"/>
			<not>
				<isset property="sun.desktop"/>
			</not>
		</and>
	</condition>

	<property name="graphics" value="${sun.desktop}" />

	<condition property="arch" value="x86_64">
		<or>
			<equals arg1="${os.arch}" arg2="amd64"/>
			<equals arg1="${os.arch}" arg2="x86_64"/>
		</or>
	</condition>

	<condition property="arch" value="x86" else="unknown">
		<or>
			<equals arg1="${os.arch}" arg2="i386"/>
			<equals arg1="${os.arch}" arg2="i486"/>
		</or>
	</condition>

	<property name="arch" value="${os.arch}" />

	<property name="host.arch" value="${graphics}-${os}-${arch}"/>

</project>