<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<!--
########### SVN repository information ###################
# $Date$
# $Author$
# $Revision$
# $URL$
# $Id$
########### SVN repository information ###################
-->


<project 
	default="create_run_jar" 
	name="Create Runnable Jar for Project CountdownJ">
	<!--this file was created by Eclipse Runnable JAR Export Wizard-->
	<!--ANT 1.7 is required  -->

	<import file="hostarch.xml"/>

	<property name="version" value="1.0j"/>
	<!-- get this elsewhere? -->

	<property name="bin.dir" value="bin"/>
	<property name="src.dir" value="src"/>
	<property name="swt.dir" value="../org.eclipse.swt"/>
	<property name="swt.jar" value="${swt.dir}/swt.jar"/>
	<property name="main.class" value="org.jemian.countdownj.Gui"/>

	<target name="create_run_jar">
		<jar 
        	destfile="${basedir}/CountdownJ-${version}-${host.arch}.jar" 
        	filesetmanifest="mergewithoutmain">
			<manifest>
				<attribute name="Main-Class" value="${main.class}"/>
				<attribute name="Class-Path" value="."/>
			</manifest>
			<fileset dir="${bin.dir}"/>
			<fileset dir="${swt.dir}"/>
			<zipfileset excludes="META-INF/*.SF" src="${swt.jar}"/>
		</jar>
		<chmod 
		    file="${basedir}/CountdownJ-${version}-${host.arch}.jar" 
		    perm="ugo+rx">
		</chmod>
	</target>

	<target name="info">
		<echoproperties/>
		<echo message="ant.file = ${ant.file}"/>
		<echo message="ant.home = ${ant.home}"/>
		<echo message="ant.java.version = ${ant.java.version}"/>
		<echo message="ant.project.name = ${ant.project.name}"/>
		<echo message="eclipse.home = ${eclipse.home}"/>
		<echo message="basedir = ${basedir}"/>
		<echo message="os.name = ${os.name}"/>
		<echo message="os.arch = ${os.arch}"/>
		<echo message="sun.arch.data.model = ${sun.arch.data.model}"/>
		<echo message="sun.desktop = ${sun.desktop}"/>
		<echo message="os = ${os}"/>
		<echo message="host.arch = ${host.arch}"/>
	</target>

</project>
